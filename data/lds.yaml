    resources:
    %{ for cluster in clusters ~}
- "@type": "type.googleapis.com/envoy.config.listener.v3.Listener"
      name: ${cluster.name}-${cluster.fport}
      address:
        socket_address:
          address: 0.0.0.0
          port_value: ${cluster.fport}
      filter_chains:
      - filters:
          name: "envoy.http_connection_manager"
          typed_config:
            "@type": "type.googleapis.com/envoy.extensions.filters.network.tcp_proxy.v3.TcpProxy"
            stat_prefix: ${cluster.name}-${cluster.bport}
            cluster: ${cluster.name}-${cluster.bport}
            max_connect_attempts: 4
    %{ endfor ~}
